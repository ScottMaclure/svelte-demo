<div class="helloWorld">

  <RouterLink to="/">Splash</RouterLink>
  <RouterLink to="/ListUsers">List Users</RouterLink>

  <div id="content"></div>

</div>

<script>
  import SvelteRouter from '../vendors/svelte-router/src/index.js'
  import Splash from './Splash.html'
  import ListUsers from './ListUsers.html'

  const { createRouter, RouterLink } = SvelteRouter

  const router = createRouter({
    '/': Splash,
    '/ListUsers': ListUsers
  })

  export default {
    components: {
      RouterLink,
      Splash,
      ListUsers
    },
    oncreate () {
      router.create('#content')
    },
    ondestroy () {
      router.destroy()
    },
    data () {
      return {
        isLoading: false,
        count: 0,
        items: []
      }
    },
    methods: {
        doInc: function (count) {
            // TODO emit semantic event and get index.html to update localStorage, so the component knows nothing!
            window.localStorage.count = parseInt(count, 10) + 1
            this.set({ count: window.localStorage.count })
        },
        requestData: function () {
          // TODO isLoading... localise to Users component?
          this.set({ isLoading: true })
          this.fire('requestData')
        },
        setData: function (data) {
          data.isLoading = false
          data.originalItems = data.items.slice() // make a shallow copy for filtering etc.
          this.set(data)
        }
    }
  }
</script>
<style>
  .helloWorld {
    background-color: var(--base-background-color, #00f);
    padding-bottom: var(--spacing-horizontal-normal);
  }
  .router-link-active {
    color: red;
  }
</style>