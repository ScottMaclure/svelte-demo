<h1>Hello {{name}}</h1>
<p>Count: {{count}} <button on:click='doInc(count)'>Increment</button> <button on:click='set({ count: 0 })'>Reset</button></p>

<!-- TODO search/filter sub-component -->

<!-- TODO sub-component -->
<Users
  isLoading='{{isLoading}}'
  items='{{items}}'
  on:requestData='requestData()'
  on:deleteItem='fire("deleteItem", event)'
/>

<script>
  import Users from './Users.html'

  export default {
    data () {
      return {
        isLoading: false,
        count: 0,
        items: []
      }
    },
    methods: {
        doInc: function (count) {
            // TODO emit semantic event and get index.html to update localStorage, so the component knows nothing!
            window.localStorage.count = parseInt(count, 10) + 1
            this.set({ count: window.localStorage.count })
        },
        requestData: function () {
          // TODO isLoading... localise to Users component?
          this.set({ isLoading: true })
          this.fire('requestData')
        },
        setData: function (data) {
          data.isLoading = false
          this.set(data)
        }
    },
    components: {
      Users
    }
  }
</script>